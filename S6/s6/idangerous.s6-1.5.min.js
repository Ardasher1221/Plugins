/*
 * S6 1.5 - 3D Mobile Touch Slider
 * http://www.idangero.us/sliders/s6/
 *
 * Copyright 2012-2013, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under iDangero.us Regular License (RL):
 * http://www.idangero.us/index.php?content=article&id=21
 *
 * Updated on: May 22, 2013
*/
(function(n){n.fn.s6=function(d){function A(){var a=document.createElement("div");a.id="test3d";var c=!1;"webkitPerspective"in a.style&&(c=!0);"MozPerspective"in a.style&&(c=!0);"OPerspective"in a.style&&(c=!0);"MsPerspective"in a.style&&(c=!0);"perspective"in a.style&&(c=!0);if(c&&"webkitPerspective"in a.style){var d=document.createElement("style");d.textContent="@media (-webkit-transform-3d), (transform-3d), (-moz-transform-3d), (-o-transform-3d), (-ms-transform-3d) {#test3d{height:5px}}";document.getElementsByTagName("head")[0].appendChild(d);
document.body.appendChild(a);c=5===a.offsetHeight;d.parentNode.removeChild(d);a.parentNode.removeChild(a)}return c}function f(){return"horizontal"==a.params.mode}function g(b,c){if(b){var d="",e=a.isSafari||a.isUiWebView,j=!1;switch(c){case "front":d="translate3d(0px, 0px, 0px) rotateY(0deg)";e&&(d=f()?"translate3d(0px, 0px, "+a.width/2+"px) rotateY(0deg)":"translate3d(0px, 0px, "+a.height/2+"px) rotateY(0deg)",j=f()?"50% 50% "+a.width/2+"px":"50% 50% "+a.height/2+"px");break;case "right":d=f()?"translate3d("+
a.width/2+"px, 0px, "+-a.width/2+"px) rotateY(90deg)":"translate3d("+(a.width-a.height/2)+"px, 0px, "+-a.height/2+"px) rotateY(90deg)";break;case "back":f()?(d="translate3d(0px, 0px, "+-a.width+"px) rotateY(180deg)",e&&(d="translate3d(0px, 0px, "+-a.width/2+"px) rotateY(180deg)",j="50% 50% "+-a.width/2+"px")):(d="translate3d(0px, 0px, "+-a.height+"px) rotateX(180deg)",e&&(d="translate3d(0px, 0px, "+-a.height/2+"px) rotateX(180deg)",j="50% 50% "+-a.height/2+"px"));break;case "left":d=f()?"translate3d("+
-a.width/2+"px, 0px, "+-a.width/2+"px) rotateY(-90deg)":"translate3d("+-a.height/2+"px, 0px, "+-a.height/2+"px) rotateY(-90deg)";break;case "top":d=f()?"translate3d(0px, "+-a.width/2+"px, "+-a.width/2+"px) rotateX(90deg)":"translate3d(0px, "+-a.height/2+"px, "+-a.height/2+"px) rotateX(90deg)";break;case "bottom":d=f()?"translate3d(0px, "+(a.height-a.width/2)+"px, "+-a.width/2+"px) rotateX(-90deg)":"translate3d(0px, "+a.height/2+"px, "+-a.height/2+"px) rotateX(-90deg)"}var h=b.style;h.webkitTransform=
h.MsTransform=h.msTransform=h.MozTransform=h.OTransform=h.transform=d;e&&j&&(h.webkitTransformOrigin=h.transformOrigin=j)}}function u(b,c){var d=f()?k().y:k().x,e=Math.abs(d),e=e-360*Math.floor(e/360);b=0===c||b?b:a.activeSlide+1>=a.numOfSlides?0:a.activeSlide+1;c=0===c||c?c:0>a.activeSlide-1?a.numOfSlides-1:a.activeSlide-1;c==a.activeSlide&&(c=0>a.activeSlide-1?a.numOfSlides-1:a.activeSlide-1);b==a.activeSlide&&(b=a.activeSlide+1>=a.numOfSlides?0:a.activeSlide+1);b===c&&b>a.activeSlide&&(c="undefined");
var j=a.slides.eq(b),h=j[0],m="undefined"!=c?a.slides.eq(c):!1,l=m[0];a.slides.each(function(){var d=n(this).index();d!=b&&(d!=c&&d!=a.activeSlide)&&n(this).hide()});if(f()){0==e&&(g(h,"right"),g(l,"left"));if(90==e||270==e&&0<d)g(h,"back"),g(l,"front");180===e&&(g(h,"left"),g(l,"right"));if(270===e&&0>d||90==e&&0<d)g(h,"front"),g(l,"back")}else{0==e&&(g(h,"bottom"),g(l,"top"));if(90==e||270==e&&0>d)g(h,"back"),g(l,"front");180===e&&(g(h,"top"),g(l,"bottom"));if(270===e&&0<d||90==e&&0>d)g(h,"front"),
g(l,"back")}j.show();"undefined"!=c&&m.show()}function w(){a.init();a.setSlides();r(!0)}function B(b){var c=b.keyCode||b.charCode;if(37==c||39==c||38==c||40==c){for(var d=!1,e=a.container.offset(),j=n(window).scrollLeft(),h=n(window).scrollTop(),g=n(window).width(),k=n(window).height(),e=[[e.left,e.top],[e.left+a.width,e.top],[e.left,e.top+a.height],[e.left+a.width,e.top+a.height]],l=0;l<e.length;l++){var m=e[l];m[0]>=j&&(m[0]<=j+g&&m[1]>=h&&m[1]<=h+k)&&(d=!0)}if(!d)return}f()?((37==c||39==c)&&b.preventDefault(),
39==c&&a.swipeNext(),37==c&&a.swipePrev()):((38==c||40==c)&&b.preventDefault(),40==c&&a.swipeNext(),38==c&&a.swipePrev())}function C(b){d.preventLinks&&(a.allowLinks=!0);if(a.isTouched)return!1;a.isTouched=!0;a.inf&&u();if(!a.params.onlyExternal&&(!a.isSupportTouch()||1==b.targetTouches.length))if(!a.isSupportTouch()&&a.params.simulateTouch&&b.preventDefault(),a.touches.startX=a.isSupportTouch()?b.targetTouches[0].pageX:b.pageX,a.touches.startY=a.isSupportTouch()?b.targetTouches[0].pageY:b.pageY,
p(0),a.rotates.startX=a.rotates.currentX=k().x,a.rotates.startY=a.rotates.currentY=k().y,a.times.start=(new Date).getTime(),q=void 0,d.onTouchStart)d.onTouchStart(a)}function D(b){if(a.isTouched&&!a.params.onlyExternal){if(a.isSupportTouch()&&("undefined"==typeof q&&f()&&(q=!!(q||Math.abs(b.targetTouches[0].pageY-a.touches.startY)>Math.abs(b.targetTouches[0].pageX-a.touches.startX))),"undefined"==typeof q&&!f()&&(q=!!(q||Math.abs(b.targetTouches[0].pageY-a.touches.startY)<Math.abs(b.targetTouches[0].pageX-
a.touches.startX))),q))return;a.params.autoPlay&&a.stopAutoPlay();d.preventLinks&&(a.allowLinks=!1);if(!a.isSupportTouch()||1==b.touches.length){b.preventDefault();a.isSupportTouch();a.touches.currentX=a.isSupportTouch()?b.targetTouches[0].pageX:b.pageX;a.touches.currentY=a.isSupportTouch()?b.targetTouches[0].pageY:b.pageY;a.touches.diffX=a.touches.currentX-a.touches.startX;a.touches.diffY=a.touches.currentY-a.touches.startY;b=(!f()?a.touches.diffY*(-90/a.height):0)+1*a.rotates.startX;var c=(f()?
90*a.touches.diffX/a.width:0)+1*a.rotates.startY;if(a.inf)if(f()){if(90<=Math.abs(c-a.rotates.startY))return}else if(90<=Math.abs(b-a.rotates.startX))return;a.rotates.currentX=b;a.rotates.currentY=c;d.followFinger&&m({x:a.rotates.currentX,y:a.rotates.currentY},!1);if(d.onTouchMove)d.onTouchMove(a);d.grabCursor&&(a.container[0].style.cursor="move",a.container[0].style.cursor="grabbing",a.container[0].style.cursor="-moz-grabbin",a.container[0].style.cursor="-webkit-grabbing")}}}function E(){if(a.isTouched&&
(a.isTouched=!1,!a.params.onlyExternal)){m({x:a.rotates.currentX,y:a.rotates.currentY},!0);p(a.params.speed);d.grabCursor&&(a.container[0].style.cursor="move",a.container[0].style.cursor="grab",a.container[0].style.cursor="-moz-grab",a.container[0].style.cursor="-webkit-grab");a.rotates.currentY||(a.rotates.currentY=a.rotates.startY);a.rotates.currentX||(a.rotates.currentX=a.rotates.startX);a.rotates.diffY=a.rotates.currentY-a.rotates.startY;a.rotates.diffX=a.rotates.currentX-a.rotates.startX;a.times.end=
(new Date).getTime();var b=a.times.end-a.times.start;5>Math.abs(a.rotates.diff)&&(300>b&&!1==a.allowLinks)&&(!d.freeMode&&0!=Math.abs(a.rotates.diff)&&r(),d.preventLinks&&(a.allowLinks=!0),d.onSlideClick&&(a.allowSlideClick=!0));a.params.freeMode&&!a.inf?300>b&&!0==a.params.freeModeFluid&&(f()?0!==Math.abs(a.rotates.diffY)&&(m({y:1*a.rotates.currentY+1*a.rotates.diffY},!0),p(3*b)):0!==Math.abs(a.rotates.diffX)&&(m({x:1*a.rotates.currentX+1*a.rotates.diffX},!0),p(3*b))):(a.rotates.diff=f()?a.rotates.diffY:
a.rotates.diffX,a.direction=f()?0>a.rotates.diffY?"toRight":"toLeft":0<a.rotates.diffX?"toRight":"toLeft","toRight"==a.direction&&500>=b&&(10>Math.abs(a.rotates.diff)||!d.shortSwipes?r():a.swipeNext("internal")),"toLeft"==a.direction&&500>=b&&(10>Math.abs(a.rotates.diff)||!d.shortSwipes?r():a.swipePrev("internal")),"toRight"==a.direction&&500<b&&(45<=Math.abs(a.rotates.diff)?a.swipeNext("internal"):r()),"toLeft"==a.direction&&500<b&&(45<=Math.abs(a.rotates.diff)?a.swipePrev("internal"):r()));if(d.onTouchEnd)d.onTouchEnd(a)}}
function r(b){if(f()){var c=90*Math.round(k().y/90);m({y:c},!0,!0);a.rotates.currentY=c}else c=90*Math.round(k().x/90),m({x:c},!0,!0),a.rotates.currentX=c;b&&p(0);if(d.onSlideReset)d.onSlideReset(a)}function x(b){var c=a.wrapper[0],d=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd"];if(b)for(var e=function(){b(a);for(var f=0;f<d.length;f++)c.removeEventListener(d[f],e,!1)},f=0;f<d.length;f++)c.addEventListener(d[f],e,!1)}function y(){if(a.inf)var b=a.slides.eq(a.activeSlide);
else{var c=f()?k().y:k().x,c=c-360*Math.floor(c/360),c=4-c/90,c=4==c?0:c;0==c&&(b=a.wrapper.find(".s6-slide-front"));1==c&&(f()?b=a.wrapper.find(".s6-slide-right"):b=a.wrapper.find(".s6-slide-top"));2==c&&(b=a.wrapper.find(".s6-slide-back"));3==c&&(f()?b=a.wrapper.find(".s6-slide-left"):b=a.wrapper.find(".s6-slide-bottom"))}a.wrapper.find(".s6-slide-active").removeClass("s6-slide-active");b.addClass("s6-slide-active")}function m(b,c,g,e){g||(g=!1);b||(b={});b.x=b.x||0;b.y=b.y||0;b.z=b.z||0;var j=
0,j=f()?-a.width/2:-a.height/2,j=a.isSafari||a.isUiWebView?j:0,h=a.wrapper[0].style;h.webkitTransform=h.MsTransform=h.MozTransform=h.OTransform=h.transform="translate3d(0px,  0px,"+j+"px) rotateX("+b.x+"deg) rotateY("+b.y+"deg)";!f()&&a.params.dynamicShadow&&(j=Math.abs(b.x),j-=90*Math.floor(j/90),j=1.5-(Math.sin(2*j*Math.PI/360)/2+Math.cos(2*j*Math.PI/360)/2),j=a.params.dynamicShadowScale/j,h=a.shadow[0].style,h.webkitTransform=h.MsTransform=h.MozTransform=h.OTransform=h.transform="scale3d("+d.dynamicShadowScale+
", 1, "+j+") translate3d(0px, "+(a.height/2+a.params.dynamicShadowOffset)+"px, "+-a.height/2/j+"px) rotateX(-90deg)");c&&a.wrapper.attr({"data-s6rotatex":b.x,"data-s6rotatey":b.y,"data-s6rotatez":b.z});if(a.params.freeMode||g)c=a,g=b.x,j=b.y,a.inf?e?(g=a.activeSlide+1>=a.numOfSlides?0:a.activeSlide+1,j=0>a.activeSlide-1?a.numOfSlides-1:a.activeSlide-1,e="next"==e?g:j,a.activeSlide=e):e=a.activeSlide:(e="horizontal"==a.params.mode?j:-g,0<e?(g=Math.floor(e/360),e=4-Math.round((e-360*g)/90)):(g=Math.floor(-e/
360),e=Math.round(-(e+360*g)/90)),4==e&&(e=0)),c.activeSlide=e,a.params.pagination&&F({rotateX:b.x,rotateY:b.y})}function k(){return{x:a.wrapper.attr("data-s6rotatex"),y:a.wrapper.attr("data-s6rotatey"),z:a.wrapper.attr("data-s6rotatez")}}function p(b){var c=a.wrapper[0].style;c.webkitTransitionDuration=c.MsTransitionDuration=c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=b/1E3+"s";!f()&&a.params.dynamicShadow&&(c=a.shadow[0].style,c.webkitTransitionDuration=c.MsTransitionDuration=
c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=b/1E3+"s")}function F(){var b=n(a.params.pagination).find("."+a.params.paginationActiveClass).index(),c=a.activeSlide;b!=c&&(n(a.params.pagination).find("."+a.params.paginationActiveClass).removeClass(a.params.paginationActiveClass),n(a.params.pagination).children().eq(c).addClass(a.params.paginationActiveClass))}var l=n(this);if(0==l.length)return l;var s={mode:"horizontal",touchRatio:1,dynamicShadow:!1,dynamicShadowOffset:20,dynamicShadowScale:0.9,
speed:500,followFinger:!0,freeMode:!1,freeModeFluid:!1,setPerspective:!0,perspective:1E3,simulateTouch:!0,autoPlay:!1,grabCursor:!0,onlyExternal:!1,createPagination:!0,createBackFaces:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,preventLinks:!0,keyboardControl:!1,shortSwipes:!0,resizeEvent:"auto",autoResize:!0,slideElement:"div",slideClass:"s6-slide",wrapperClass:"s6-wrapper",paginationClass:"s6-pagination-switch",paginationActiveClass:"s6-active-switch"};d=d||{};for(var t in s)t in
d||(d[t]=s[t]);var q;if(!(0<l.find(".s6-slide-top").length)){"horizontal"==d.mode?l.addClass("s6-wp8-horizontal"):l.addClass("s6-wp8-vertical");if((!A()||window.navigator.msPointerEnabled)&&window.Swiper)return l.css({overflow:"hidden"}),l.find("."+d.slideClass).css("float","left").css("position","relative").css("visibility","visible"),new Swiper(l.selector,d);d.faces=d.faces||{};d.faces.left=d.faces.left||"#555";d.faces.right=d.faces.right||"#888";d.faces.top=d.faces.top||"#888";d.faces.bottom=d.faces.bottom||
"#555";var a={container:l,wrapper:l.find("."+d.wrapperClass),slides:l.find("."+d.slideClass),params:d,touches:{},rotates:{},times:{},isSupport3D:A(),activeSlide:0,isSafari:0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome"),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),init:function(){a.width=l.width();a.height=l.height();var b=f()?a.width:a.height;a.wrapper.css({width:a.width,height:a.height,"-moz-transform-origin":a.width/2+"px "+
b/2+"px -"+b/2+"px","-webkit-transform-origin":a.width/2+"px "+b/2+"px -"+b/2+"px","-ms-transform-origin":a.width/2+"px "+b/2+"px -"+b/2+"px","-o-transform-origin":a.width/2+"px "+b/2+"px -"+b/2+"px","transform-origin":a.width/2+"px "+b/2+"px -"+b/2+"px"});a.wrapper.find("."+d.slideClass).css({width:a.width,height:a.height})}};a.init();!0===a.params.setPerspective&&a.container.css({"-webkit-perspective":a.params.perspective,"-moz-perspective":a.params.perspective,"-ms-perspective":a.params.perspective,
"-o-perspective":a.params.perspective,perspective:a.params.perspective});a.wrapper.find("."+d.slideClass).css({width:a.width,height:a.height});a.numOfSlides=a.wrapper.find(".s6-slide").length;a.inf=4!=a.numOfSlides?!0:!1;a.inf&&a.slides.not(":eq(0)").hide();a.setSlides=function(){a.slides.each(function(){n(this).removeClass("s6-slide-top").removeClass("s6-slide-left").removeClass("s6-slide-right").removeClass("s6-slide-bottom").removeClass("s6-slide-front").removeClass("s6-slide-back")});a.inf?a.slides.eq(0).addClass("s6-slide-front"):
(a.slides.eq(0).addClass("s6-slide-front"),a.slides.eq(2).addClass("s6-slide-back"),f()?(a.slides.eq(1).addClass("s6-slide-right"),a.slides.eq(3).addClass("s6-slide-left")):(a.slides.eq(1).addClass("s6-slide-bottom"),a.slides.eq(3).addClass("s6-slide-top")));a.slides.each(function(){if(!a.inf){var b=n(this),c=b[0];b.hasClass("s6-slide-front")&&g(c,"front");b.hasClass("s6-slide-right")&&g(c,"right");b.hasClass("s6-slide-left")&&g(c,"left");b.hasClass("s6-slide-back")&&g(c,"back");b.hasClass("s6-slide-top")&&
g(c,"top");b.hasClass("s6-slide-bottom")&&g(c,"bottom")}});if(a.params.dynamicShadow){0<a.container.find(".s6-dynamic-shadow").length&&a.container.find(".s6-dynamic-shadow").remove();var b=a.params.dynamicShadowScale,c=a.params.dynamicShadowOffset;f()?a.wrapper.append('<div class="s6-dynamic-shadow"></div>'):a.container.append('<div class="s6-dynamic-shadow"></div>');a.shadow=a.container.find(".s6-dynamic-shadow");b=f()?"scale3d("+b+", 1, "+b+") translate3d(0px, "+(a.height-a.width/2+c)+"px, "+-a.width/
2/b+"px) rotateX(-90deg)":"scale3d("+b+", 1, "+b+") translate3d(0px, "+(a.height/2+c)+"px, "+-a.height/2/b+"px) rotateX(-90deg)";c=a.shadow[0].style;c.webkitTransform=c.MsTransform=c.MozTransform=c.OTransform=c.transform=b;c.width=a.width+"px";c.height=(f()?a.width:a.height)+"px"}f()?a.params.createBackFaces&&(a.wrapper.find(".s6-slide-top, .s6-slide-bottom").remove(),a.wrapper.append('<div class="'+a.params.slideClass+' s6-slide-top"></div><div class="'+a.params.slideClass+' s6-slide-bottom"></div>'),
a.wrapper.find(".s6-slide-top").css({width:a.width,height:a.width,background:d.faces.top}),b=a.wrapper.find(".s6-slide-top")[0],g(b,"top"),a.wrapper.find(".s6-slide-bottom").css({width:a.width,height:a.width,background:d.faces.bottom}),b=a.wrapper.find(".s6-slide-bottom")[0],g(b,"bottom")):a.params.createBackFaces&&(a.wrapper.find(".s6-slide-left, .s6-slide-right").remove(),a.wrapper.append('<div class="'+a.params.slideClass+' s6-slide-left"></div><div class="'+a.params.slideClass+' s6-slide-right"></div>'),
a.wrapper.find(".s6-slide-left").css({width:a.height,height:a.height,background:d.faces.left}),b=a.wrapper.find(".s6-slide-left")[0],g(b,"left"),a.wrapper.find(".s6-slide-right").css({width:a.height,height:a.height,background:d.faces.right}),b=a.wrapper.find(".s6-slide-right")[0],g(b,"right"))};a.setSlides();a.wrapper.find("."+a.params.slideClass).css({visibility:"visible"});d.grabCursor&&(a.container[0].style.cursor="move",a.container[0].style.cursor="grab",a.container[0].style.cursor="-moz-grab",
a.container[0].style.cursor="-webkit-grab");a.params.autoResize&&("auto"==d.resizeEvent&&(d.resizeEvent="onorientationchange"in window?"orientationchange":"resize"),window.addEventListener(d.resizeEvent,w,!1));a.wrapper.find(".s6-slide-front").addClass("s6-slide-active");if(!1!=a.params.pagination){if(a.params.createPagination){s="";for(t=1;t<=a.slides.length;t++)s+="<"+d.paginationElement+' class="'+a.params.paginationClass+'"></'+d.paginationElement+">";n(a.params.pagination).html(s);if(d.paginationClickable)n("."+
a.params.paginationClass).on("click",function(){a.swipeTo(n(this).index())})}n(a.params.pagination).children().eq(0).addClass(a.params.paginationActiveClass)}a.allowLinks=!0;if(d.preventLinks)a.container.find("a").on("click",function(b){if(!a.allowLinks)return b.preventDefault(),!1});if(d.keyboardControl)n(document).on("keydown",B);a.isSupportTouch=function(){return"ontouchstart"in window};var G=a.isSupportTouch()||!a.params.simulateTouch?"touchstart":"mousedown",H=a.isSupportTouch()||!a.params.simulateTouch?
"touchmove":"mousemove",I=a.isSupportTouch()||!a.params.simulateTouch?"touchend":"mouseup",z;a.startAutoPlay=function(){a.params.autoPlay&&(z=setInterval(function(){a.swipeNext()},a.params.autoPlay))};a.stopAutoPlay=function(){z&&clearInterval(z)};a.params.autoPlay&&a.startAutoPlay();a.container[0].addEventListener(G,C,!1);var v=a.isSupportTouch()?a.container[0]:document;v.addEventListener(H,D,!1);v.addEventListener(I,E,!1);a.destroy=function(){a.container[0].removeEventListener(G,C,!1);v.removeEventListener(H,
D,!1);v.removeEventListener(I,E,!1);window.removeEventListener("resize",w,!1);d.paginationClickable&&n("."+a.params.paginationClass).off("click");d.preventLinks&&a.container.find("a").off("click");a.params.autoResize&&window.removeEventListener(d.resizeEvent,w,!1);d.keyboardControl&&n(document).off("keydown",B)};m({x:0,y:0,z:0},!0);a.swipeNext=function(b){a.inf&&"internal"!=b&&u();f()?(b=90*Math.ceil(k().y/90)-90,m({y:b},!0,!0,"next"),a.rotates.currentY=b):(b=Math.ceil(k().x/90)==k().x/90?90:0,b=
90*Math.ceil(k().x/90)+b,m({x:b},!0,!0,"next"),a.rotates.currentX=b);y();p(a.params.speed);if(d.onSlideChangeStart)d.onSlideChangeStart(a);d.onSlideChangeEnd&&x(d.onSlideChangeEnd)};a.swipePrev=function(b){a.inf&&"internal"!=b&&u();f()?(b=90*Math.floor(k().y/90)+90,m({y:b},!0,!0,"prev"),a.rotates.currentY=b):(b=Math.ceil(k().x/90)==k().x/90?-90:0,b=90*Math.floor(k().x/90)+b,m({x:b},!0,!0,"prev"),a.rotates.currentX=b);y();p(a.params.speed);if(d.onSlideChangeStart)d.onSlideChangeStart(a);d.onSlideChangeEnd&&
x(d.onSlideChangeEnd)};a.swipeTo=function(b){if(b!=a.activeSlide){if(a.inf){var c=0,g=0;b<a.activeSlide?(u(g,b),f()?(c=90*Math.floor(k().y/90)+90,m({y:c},!0,!1,"prev"),a.rotates.currentY=c):(c=Math.ceil(k().x/90)==k().x/90?-90:0,c=90*Math.floor(k().x/90)+c,m({x:c},!0,!1,"prev"),a.rotates.currentX=c)):(u(b,c),f()?(c=90*Math.ceil(k().y/90)-90,m({y:c},!0,!1,"next"),a.rotates.currentY=c):(c=Math.ceil(k().x/90)==k().x/90?90:0,c=90*Math.ceil(k().x/90)+c,m({x:c},!0,!1,"next"),a.rotates.currentX=c));p(a.params.speed);
a.activeSlide=b;a.wrapper.find(".s6-slide-active").removeClass("s6-slide-active");a.slides.eq(b).addClass("s6-slide-active");a.params.pagination&&F()}else{var g=f()?k().y:k().x,e=360*Math.floor(g/360);b*=90;c=e-b;f()||(c=e+b);b="next";c>g&&(b="prev");f()?(m({y:c},!0,!0,b),a.rotates.currentY=c):(m({x:c},!0,!0,b),a.rotates.currentX=c);y();p(a.params.speed)}if(d.onSlideChangeStart)d.onSlideChangeStart(a);d.onSlideChangeEnd&&x(d.onSlideChangeEnd)}};return a}}})(window.jQuery||window.Zepto);